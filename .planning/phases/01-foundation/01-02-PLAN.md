---
phase: 01-foundation
plan: 02
type: execute
depends_on: ["01-01"]
files_modified: [src/index.ts, src/cli/index.ts, src/cli/commands/index.ts]
---

<objective>
CLI 기본 구조 설정

Purpose: Commander.js를 사용한 CLI 프레임워크 구축. 향후 모든 명령어가 이 구조 위에 추가된다.
Output: CLI 진입점, 명령어 등록 구조, help 명령어 동작
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-01-SUMMARY.md

**Tech stack available:**
- TypeScript 5.x (ES Modules)
- Node.js 20+

**Established patterns:**
- ES Modules (import/export)
- strict TypeScript
</context>

<tasks>

<task type="auto">
  <name>Task 1: Commander.js 설치 및 CLI 진입점</name>
  <files>src/cli/index.ts, src/index.ts</files>
  <action>
commander 패키지 설치 (npm install commander)

src/cli/index.ts 생성:
- Commander program 인스턴스 생성
- name: "n8n-wfm"
- description: "n8n Workflow Manager - 워크플로우 자동 관리 도구"
- version: package.json에서 읽기 (createRequire 또는 직접 import)

src/index.ts 수정:
- cli/index.ts의 program import
- program.parse() 호출
  </action>
  <verify>npm run build && node dist/index.js --version</verify>
  <done>--version 플래그로 버전 출력, --help로 도움말 출력</done>
</task>

<task type="auto">
  <name>Task 2: 명령어 등록 구조 설정</name>
  <files>src/cli/commands/index.ts</files>
  <action>
src/cli/commands/index.ts 생성:
- registerCommands(program: Command) 함수 export
- 향후 각 명령어 모듈을 여기서 등록

예시 명령어 구조 준비:
- backup, restore, deploy, status 등의 명령어가 추가될 자리 주석

src/cli/index.ts에서 registerCommands 호출
  </action>
  <verify>npm run build && node dist/index.js --help</verify>
  <done>CLI help 출력에 프로그램 설명 표시, 명령어 등록 구조 준비됨</done>
</task>

<task type="auto">
  <name>Task 3: status 기본 명령어 추가</name>
  <files>src/cli/commands/status.ts</files>
  <action>
src/cli/commands/status.ts 생성:
- registerStatusCommand(program: Command) 함수 export
- "status" 명령어: 현재 연결된 n8n 인스턴스 상태 (구현은 Phase 2에서)
- 현재는 "Not connected to any n8n instance" 메시지 출력

commands/index.ts에서 status 명령어 등록
  </action>
  <verify>npm run build && node dist/index.js status</verify>
  <done>status 명령어 실행 시 placeholder 메시지 출력</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` 성공
- [ ] `node dist/index.js --help` 도움말 출력
- [ ] `node dist/index.js --version` 버전 출력
- [ ] `node dist/index.js status` 명령어 동작
</verification>

<success_criteria>
- 모든 태스크 완료
- CLI 기본 프레임워크 동작
- 명령어 확장 구조 준비됨
</success_criteria>

<output>
완료 후 `.planning/phases/01-foundation/01-02-SUMMARY.md` 생성
</output>
