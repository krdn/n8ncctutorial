# Plan 05-03: 선택적 워크플로우 복원

## Overview
백업에서 특정 워크플로우만 선택하여 복원하는 기능을 구현합니다. 전체 복원 대신 필요한 워크플로우만 선택적으로 복원할 수 있습니다.

## Dependencies
- 05-02 완료 (restoreBackup 함수)

## Tasks

<task id="1">
<title>선택적 복원 함수 구현</title>
<file>src/restore/restore.ts</file>
<action>modify</action>
<description>
선택적 워크플로우 복원 함수 추가:
- restoreSelectiveBackup(client, backupDir, workflowIds, options): 선택적 복원
  - workflowIds: 복원할 워크플로우 ID 또는 이름 배열
  - 매니페스트에서 해당 워크플로우만 필터링
  - 존재하지 않는 워크플로우 ID는 경고 후 건너뛰기
  - RestoreResult 반환
- findWorkflowInBackup(backupDir, idOrName): 백업에서 워크플로우 검색
  - ID 또는 이름으로 검색 지원
  - 매니페스트의 workflows 배열에서 검색
</description>
</task>

<task id="2">
<title>복원 타입 확장</title>
<file>src/restore/types.ts</file>
<action>modify</action>
<description>
선택적 복원용 타입 추가:
- SelectiveRestoreOptions extends RestoreOptions
  - workflowIds: string[] (ID 또는 이름)
  - matchByName: boolean (이름으로 매칭 허용 여부)
</description>
</task>

<task id="3">
<title>restore 모듈 인덱스 업데이트</title>
<file>src/restore/index.ts</file>
<action>modify</action>
<description>
새로운 함수 재내보내기:
- restoreSelectiveBackup
- findWorkflowInBackup
</description>
</task>

<task id="4">
<title>restore 명령어 확장</title>
<file>src/cli/commands/restore.ts</file>
<action>modify</action>
<description>
restore run 명령어에 선택적 복원 옵션 추가:
- --ids <ids>: 복원할 워크플로우 ID 목록 (콤마 구분)
- --names <names>: 복원할 워크플로우 이름 목록 (콤마 구분)
- 옵션이 없으면 전체 복원, 있으면 선택적 복원
- 선택적 복원 시 dry-run에서 선택된 워크플로우만 표시

interactive 모드 고려 (향후 확장):
- `n8n-wfm restore run <backupId> --interactive`
- 워크플로우 목록에서 선택하여 복원 (inquirer 활용)
- 현재는 --ids/--names 옵션으로 구현, interactive는 주석으로 TODO 표시
</description>
</task>

<task id="5">
<title>빌드 및 CLI 검증</title>
<file>package.json</file>
<action>verify</action>
<description>
- npm run build 실행
- node dist/index.js restore run --help에서 --ids, --names 옵션 확인
- 선택적 복원 시나리오 검증 (dry-run)
</description>
</task>

## Verification
- [ ] `npm run build` 성공
- [ ] `node dist/index.js restore run --help`에 --ids, --names 옵션 표시
- [ ] restoreSelectiveBackup 함수 구현 완료
- [ ] --ids 옵션으로 특정 워크플로우만 복원 가능
- [ ] 존재하지 않는 ID 지정 시 경고 메시지 출력

## Notes
- 백업의 워크플로우 ID와 n8n의 워크플로우 ID가 다를 수 있음 (새 환경 복원 시)
- 이름으로 검색 시 중복 이름 처리 필요 (첫 번째 매칭 사용 또는 경고)
- interactive 모드는 향후 확장으로 미루고 TODO 주석 추가
- 선택적 복원은 백업에서 일부 워크플로우만 필요할 때 유용
