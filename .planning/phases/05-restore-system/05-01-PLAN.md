# Plan 05-01: 백업 목록 조회

## Overview
기존 백업들의 목록을 조회하고 상세 정보를 확인하는 CLI 명령어를 구현합니다. storage.ts의 listBackups, readManifest 함수를 활용합니다.

## Dependencies
- Phase 4 완료 (backup 모듈 - listBackups, readManifest 활용)

## Tasks

<task id="1">
<title>restore 모듈 타입 정의</title>
<file>src/restore/types.ts</file>
<action>create</action>
<description>
복원 관련 TypeScript 타입 정의:
- RestoreOptions: 복원 실행 옵션 (mode, activate, targetIds)
- RestoreResult: 복원 결과 (성공/실패 워크플로우 목록)
- RestoreWorkflowResult: 개별 워크플로우 복원 결과
</description>
</task>

<task id="2">
<title>백업 목록 조회 함수 구현</title>
<file>src/restore/list.ts</file>
<action>create</action>
<description>
백업 목록 조회 및 표시 함수:
- getBackupList(baseDir): storage.listBackups를 래핑하여 BackupListItem[] 반환
- getBackupDetail(baseDir, backupId): 특정 백업의 상세 매니페스트 조회
- formatBackupList(backups): CLI 출력용 포맷팅 함수
- formatBackupDetail(manifest): 백업 상세 정보 포맷팅
</description>
</task>

<task id="3">
<title>restore 모듈 인덱스 설정</title>
<file>src/restore/index.ts</file>
<action>create</action>
<description>
복원 모듈 공개 API 정의:
- types.ts에서 타입 재내보내기
- list.ts에서 함수 재내보내기
</description>
</task>

<task id="4">
<title>restore list 명령어 구현</title>
<file>src/cli/commands/restore.ts</file>
<action>create</action>
<description>
restore 명령어 기본 구조 및 list 하위 명령어:
- `n8n-wfm restore list` - 백업 목록 출력
  - --dir <path>: 백업 디렉토리 지정 (기본: 설정 파일)
  - --limit <n>: 출력할 최대 개수
  - --json: JSON 형식 출력
- `n8n-wfm restore show <backupId>` - 특정 백업 상세 정보
  - 워크플로우 목록, 메타데이터, 생성 시각 등
</description>
</task>

<task id="5">
<title>CLI 명령어 등록</title>
<file>src/cli/commands/index.ts</file>
<action>modify</action>
<description>
registerRestoreCommand 함수를 가져와서 등록
</description>
</task>

<task id="6">
<title>빌드 및 CLI 검증</title>
<file>package.json</file>
<action>verify</action>
<description>
- npm run build 실행
- node dist/index.js restore --help 실행
- node dist/index.js restore list --help 실행
- node dist/index.js restore show --help 실행
</description>
</task>

## Verification
- [ ] `npm run build` 성공
- [ ] `node dist/index.js restore --help` 정상 출력
- [ ] `node dist/index.js restore list` 실행 시 백업 목록 출력
- [ ] `node dist/index.js restore show <backupId>` 실행 시 상세 정보 출력
- [ ] --json 옵션 사용 시 JSON 형식 출력

## Notes
- backup 모듈의 listBackups, readManifest를 재사용하여 중복 구현 방지
- CLI 출력은 사람이 읽기 쉬운 테이블 형식 + JSON 옵션 지원
- restore 명령어의 기본 구조를 설정하여 05-02, 05-03에서 확장
